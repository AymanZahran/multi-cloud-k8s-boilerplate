{
  "//": {
    "metadata": {
      "backend": "remote",
      "cloud": "tfc",
      "stackName": "prod",
      "version": "0.17.0"
    },
    "outputs": {
      "prod": {
        "eks_provider_key": "eks_provider_key"
      }
    }
  },
  "output": {
    "eks_provider_key": {
      "description": "The EKS provider key",
      "value": "${aws_eks_cluster.eks_cluster.endpoint}"
    }
  },
  "provider": {
    "aws": [
      {
        "access_key": "",
        "region": "us-east-2",
        "secret_key": ""
      }
    ],
    "kubernetes": [
      {
        "cluster_ca_certificate": "${base64decode(aws_eks_cluster.eks_cluster.certificate_authority[0].data)}",
        "host": "${aws_eks_cluster.eks_cluster.endpoint}"
      }
    ]
  },
  "resource": {
    "aws_eks_cluster": {
      "eks_cluster": {
        "//": {
          "metadata": {
            "path": "prod/eks_cluster",
            "uniqueId": "eks_cluster"
          }
        },
        "name": "${var.eks_cluster_name}",
        "role_arn": "arn:aws:iam::123456789012:role/eks-cluster-role",
        "tags": {
          "environment": "prod"
        },
        "version": "1.24",
        "vpc_config": {
          "subnet_ids": [
            "${aws_subnet.subnet-0.id}",
            "${aws_subnet.subnet-1.id}",
            "${aws_subnet.subnet-2.id}"
          ]
        }
      }
    },
    "aws_eks_node_group": {
      "eks_node_group": {
        "//": {
          "metadata": {
            "path": "prod/eks_node_group",
            "uniqueId": "eks_node_group"
          }
        },
        "cluster_name": "${aws_eks_cluster.eks_cluster.name}",
        "node_group_name": "eks-node-group",
        "node_role_arn": "arn:aws:iam::123456789012:role/eks-node-role",
        "scaling_config": {
          "desired_size": 2,
          "max_size": 2,
          "min_size": 2
        },
        "subnet_ids": [
          "${aws_subnet.subnet-0.id}",
          "${aws_subnet.subnet-1.id}",
          "${aws_subnet.subnet-2.id}"
        ],
        "version": "1.24"
      }
    },
    "aws_subnet": {
      "subnet-0": {
        "//": {
          "metadata": {
            "path": "prod/subnet-0",
            "uniqueId": "subnet-0"
          }
        },
        "cidr_block": "10.0.0.0/24",
        "vpc_id": "${aws_vpc.vpc.id}"
      },
      "subnet-1": {
        "//": {
          "metadata": {
            "path": "prod/subnet-1",
            "uniqueId": "subnet-1"
          }
        },
        "cidr_block": "10.0.1.0/24",
        "vpc_id": "${aws_vpc.vpc.id}"
      },
      "subnet-2": {
        "//": {
          "metadata": {
            "path": "prod/subnet-2",
            "uniqueId": "subnet-2"
          }
        },
        "cidr_block": "10.0.2.0/24",
        "vpc_id": "${aws_vpc.vpc.id}"
      }
    },
    "aws_vpc": {
      "vpc": {
        "//": {
          "metadata": {
            "path": "prod/vpc",
            "uniqueId": "vpc"
          }
        },
        "cidr_block": "10.0.0.0/16",
        "enable_dns_hostnames": true
      }
    },
    "kubernetes_namespace": {
      "flux-namespace": {
        "//": {
          "metadata": {
            "path": "prod/flux-namespace",
            "uniqueId": "flux-namespace"
          }
        },
        "metadata": {
          "name": "flux-system"
        }
      }
    }
  },
  "terraform": {
    "backend": {
      "remote": {
        "hostname": "app.terraform.io",
        "organization": "multi-cloud-pipelines",
        "workspaces": {
          "name": "prod"
        }
      }
    },
    "required_providers": {
      "aws": {
        "source": "aws",
        "version": "4.67.0"
      },
      "kubernetes": {
        "source": "kubernetes",
        "version": "2.21.1"
      }
    }
  },
  "variable": {
    "eks_cluster_name": {
      "default": "eks-cluster",
      "description": "The name of the EKS cluster",
      "type": "string"
    }
  }
}